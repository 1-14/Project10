# Project10

## 一、ECDSA概述 [一]

椭圆曲线数字签名算法（ECDSA）是使用椭圆曲线密码（ECC）对数字签名算法（DSA）的模拟。ECDSA于1999年成为ANSI标准，并于2000年成为IEEE和NIST标准。它在1998年既已为ISO所接受，并且包含它的其他一些标准亦在ISO的考虑之中。与普通的离散对数问题（discrete logarithm problem DLP）和大数分解问题（integer factorization problem IFP）不同，椭圆曲线离散对数问题（elliptic curve discrete logarithm problem ECDLP）没有亚指数时间的解决方法。因此椭圆曲线密码的单位比特强度要高于其他公钥体制。



数字签名算法（DSA）在联邦信息处理标准FIPS中有详细论述，称为数字签名标准。它的安全性基于素域上的离散对数问题。椭圆曲线密码（ECC）由Neal Koblitz和Victor Miller于1985年发明。它可以看作是椭圆曲线对先前基于离散对数问题（DLP）的密码系统的模拟，只是群元素由素域中的元素数换为有限域上的椭圆曲线上的点。椭圆曲线密码体制的安全性基于椭圆曲线离散对数问题（ECDLP）的难解性。椭圆曲线离散对数问题远难于离散对数问题，椭圆曲线密码系统的单位比特强度要远高于传统的离散对数系统。因此在使用较短的密钥的情况下，ECC可以达到于DL系统相同的安全级别。这带来的好处就是计算参数更小，密钥更短，运算速度更快，签名也更加短小。因此椭圆曲线密码尤其适用于处理能力、存储空间、带宽及功耗受限的场合

## 二、ECDSA原理[一]

ECDSA是ECC与DSA的结合，整个签名过程与DSA类似，所不一样的是签名中采取的算法为ECC，最后签名出来的值也是分为r,s。

### 签名过程如下：

1、选择一条椭圆曲线Ep(a,b)，和基点G；

2、选择私有密钥k（k<n，n为G的阶），利用基点G计算公开密钥K=kG；

3、产生一个随机整数r（r<n），计算点R=rG；

4、将原数据和点R的坐标值x,y作为参数，计算SHA1做为hash，即Hash=SHA1(原数据,x,y)；

5、计算s≡r - Hash * k (mod n)

6、r和s做为签名值，如果r和s其中一个为0，重新从第3步开始执行

### 验证过程如下：

1、接受方在收到消息(m)和签名值(r,s)后，进行以下运算

2、计算：sG+H(m)P=(x1,y1), r1≡ x1 mod p。

3、验证等式：r1 ≡ r mod p。

4、如果等式成立，接受签名，否则签名无效。

### 实现细节[二]

主要是椭圆曲线的乘法，可参见这篇文章的介绍https://zhuanlan.zhihu.com/p/97953640
以及维基百科
https://en.wikipedia.org/wiki/Elliptic_curve_point_multiplication。
ECDSA 有两处用到了这个乘法，分别是计算 r 时 P = kG，以及计算公钥时 Ha = da G。该乘法的性质使得正向计算可以在多项式时间内求出 ，而反向计算则无法在多项式时间内求出，也就是说无法根据 P和G反推出k，也无法根据Ha和G反推出 da。
这种即便你知道原点和终点，但是无法知道被乘数是ECDSA算法背后安全性的所有基础，而这一原则也被称为单向陷门函数。

另一个点是一个数的乘法逆元，即使不理解也不会影响对算法整体的认识，之后有时间再研究下。

## 三、在以太坊中应用

### 1.交易签名：

在以太坊上，ECDSA被用于对交易进行数字签名。在发送以太币或执行智能合约时，交易必须经过数字签名以确保交易的安全性和完整性。发送方使用其私钥对交易进行签名，而接收方可以使用发送方的公钥来验证签名，以确保该交易未被篡改。

### 2.账户地址：

以太坊地址是由公钥生成的，因此ECDSA被用于生成账户地址。地址是以太坊网络中唯一标识用户和智能合约的标识符。

### 3.智能合约：

在以太坊智能合约中，ECDSA密钥对被用于验证对合约的访问权限。只有持有相应私钥的地址才能执行智能合约的特定操作，这样可以确保合约的安全性和防止未授权的修改。

### 4.代币交易：

许多代币标准（如ERC-20）使用ECDSA签名来验证代币的转移。这些代币标准基于以太坊智能合约，并依赖于ECDSA来验证转移交易的合法性。

### 参考资料

[一] https://zhuanlan.zhihu.com/p/31671646

[二] https://blog.csdn.net/weixin_43867940/article/details/130258535



